@using System.Timers
@inject IJSRuntime JSRuntime
<input @oninput="HandleInputChange"
       @ondblclick="OnCellDoubleClick"
       @onkeydown="HandleKeyDown"
       @bind-value="@UserInput" 
       style="@Style"
       class="input-cell @EditingClass"
       id="@Cell.Address"/>

@code {
    [Parameter] public Cell Cell { get; set; }
    [Parameter] public string Style { get; set; }
    private string UserInput { get; set; }
    private bool IsEditing = false;

    protected override void OnInitialized()
    {
        UserInput = Cell.Value;
    }

    private async Task HandleInputChange(ChangeEventArgs e)
    {
     
    }

    private void HandleKeyDown(KeyboardEventArgs e)
    {
        
    }

    private void OnCellDoubleClick()
    {
        Style = "color: blue;";
        IsEditing = true;
        StateHasChanged();

    }

    private bool IsFormula =>
        !string.IsNullOrEmpty(UserInput) && UserInput.StartsWith("=");

    private string EditingClass => IsEditing ? "editing" : string.Empty;
}